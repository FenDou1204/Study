# 网络安全隔离装置(正向型)SysKeeper-2000 配置使用

## 修改校对时间

2020年04月06日15:17:10

## 产品介绍

南瑞网络安全隔离装置只能应用于电力现场，装置主要放置于两个不同安全防护等级网络之间。主要的优点有:

- 使用Linux系统并且裁剪掉了协议栈，能够提高抗攻击能力
- 数据单向传输。设备隔离部件采用了独立的芯片，从硬件上保证从低安全区到到高安全区的TCP应答不携带任何应用层数据。数据只能从高安全区到低安全区
- 隔离部件传输数据只包含应用层数据，不带任何连接信息。

更多的内容请自行查找网上的资料。

## 参考文章

在研究南瑞的产品时，寄来的设备中带有的说明书以及光盘等配件。可是最严重的问题是，说明书和实际的设备牛头不对马嘴，根本无法参考...

度娘搜索到以下参考资料，包括登录设备的方式以及IP设定。

- 配置参考：[https://blog.csdn.net/fm0517/article/details/87195251](https://blog.csdn.net/fm0517/article/details/87195251) 此博客内容虽然部分配置说明和拿到手的产品有些区别，但是参考性很高。

## 硬件外观及可能的网口功能

硬件跟用户手册的描述差异较大，如果设备与实际产品差异较大，最好办法是寻求设备厂商的技术支持。

### 后面板

- 双电源
- 2个USB口 2个串口 6个网口

### 前面板

- 多个指示灯
- 设备名称以及型号

### 具体描述

- 串口可以登录，缺少用户名和密码。按照用户手册，配置管理是通过串口来配置的
- 双主板架构，6个网口每个主板3个，分别为**内网1，内网2，内网3，外网1，外网2，外网3**

## 硬件网口说明

- **内网3网口疑似为正向方式的配置管理口，IP为【11.22.33.44】，监听端口为【8888】**
- **内网3**IP无法ping通，可以通过配置管理工具连接
- 内网1和内网2口无法当作管理口连接
- 配置管理工具登录用户名和密码为:【admin】【Nari.6712】

## 具体配置流程

### 管理工具安装

1. 从设备带光盘中拷贝**jdk-6u1-windows-i586-p**和**SysKeeper2000SetUpV1.3.9**软件并且进行安装
2. 将管理PC的IP设置为11.22.33.43或者同网段IP，掩码为【255.255.255.0】
3. **将管理PC与设备的内网3口相连接**
4. 安装成功后双击SysKeeper文件,如下图所示
    
    ![](https://github.com/GrapeSky04/picture/blob/master/nari/login.jpg?raw=true)

5. 输入**默认管理IP:11.22.33.44**,点击**连接装置**
6. 成功连接后会进入**安全隔离控制台**

    ![](https://github.com/GrapeSky04/picture/blob/master/nari/rule_config.jpg?raw=true)

7. 点击左上角【用户登录】，键入用户名和密码【admin】【Nari.6712】，即可获取到root权限，可以进行策略配置，用户管理，日志管理等操作

### 规则配置

1. 点击【规则配置】-【策略配置】
2. 点击左侧【新建资源】
3. 输入相应的数据信息,具体配置数据请看下述方法
4. 点击左侧【上传资源】
5. 点击【重启装置】以应用配置的策略

### 具体规则配置以及数据流向说明

**南瑞的设备只能传输电力系统的数据，不能传输常见的协议数据,具体测试可以使用【电力专用横向隔离装置测试程序V1.0】,这个稍后看是否还有存放的软件。**

举例说明：

    PC1         内网1口      外网1口       PC2
    10.10.10.10 10.10.10.11 22.22.22.21  22.22.22.22

业务需求:

PC1向PC2传输数据，但是PC2无法向PC1传输数据。外网1口只能通过中间隔离传输部件返回4字节数据(有相应的接口限制)。

配置策略如下图:

   ![](https://github.com/GrapeSky04/picture/blob/master/nari/rule.png?raw=true)

通过PC1连接内网1口IP【10.10.10.11】，即可传输数据到PC2。PC2接收到的数据为**22.22.22.21和22.22.22.22**之间的数据通讯

**模拟客户端和服务端必须为电力系统模拟软件，常见的协议无法建立连接以及数据传输。**

## 改进优化

部分功能未进行测试，有些问题不能妄下结论，主要思考以下几点:

- 配置策略的时候必须为一个client一个server？不能为多个client吗？
- server监听的只有一个端口？不可以提供多个业务吗？
- 产生的虚拟IP是没有上限的吗？